{"version":3,"names":["_FDBObjectStore","_interopRequireDefault","require","_FDBRequest","_errors","_FakeDOMStringList","_FakeEvent","_FakeEventTarget","_scheduling","e","__esModule","default","FDBTransaction","FakeEventTarget","_state","_started","_rollbackLog","_objectStoresCache","Map","error","onabort","oncomplete","onerror","_requests","constructor","storeNames","mode","db","_scope","Set","objectStoreNames","FakeDOMStringList","Array","from","sort","_abort","errName","f","reverse","DOMException","undefined","request","readyState","source","result","AbortError","event","FakeEvent","bubbles","cancelable","eventPath","dispatchEvent","queueTask","abort","InvalidStateError","objectStore","name","get","rawObjectStore","_rawDatabase","rawObjectStores","has","NotFoundError","objectStore2","FDBObjectStore","set","_execRequestAsync","obj","operation","Object","hasOwn","TransactionInactiveError","FDBRequest","transaction","push","_start","length","r","shift","defaultAction","err","bind","canceled","commit","toString","_default","exports"],"sourceRoot":"../../../../../lib","sources":["internal/web/memidb/FDBTransaction.js"],"mappings":"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","ignoreList":[]}
