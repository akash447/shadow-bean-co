{"version":3,"names":["_FDBTransaction","_interopRequireDefault","require","_errors","_FakeDOMStringList","_FakeEventTarget","_ObjectStore","_scheduling","_validateKeyPath","e","__esModule","default","confirmActiveVersionchangeTransaction","database","_runningVersionchangeTransaction","InvalidStateError","transactions","_rawDatabase","filter","tx","mode","transaction","length","_state","TransactionInactiveError","closeConnection","connection","_closePending","transactionsComplete","every","_closed","connections","otherConnection","queueTask","FDBDatabase","FakeEventTarget","constructor","rawDatabase","push","name","version","objectStoreNames","FakeDOMStringList","Array","from","rawObjectStores","keys","sort","createObjectStore","options","undefined","TypeError","keyPath","autoIncrement","validateKeyPath","has","ConstraintError","isArray","InvalidAccessError","_rollbackLog","objectStore","get","deleted","_scope","delete","rawObjectStore","ObjectStore","_push","_sort","add","set","deleteObjectStore","store","NotFoundError","objectStoreName","_objectStoresCache","storeNames","hasActiveVersionchange","some","db","storeName","contains","FDBTransaction","processTransactions","close","toString","_default","exports"],"sourceRoot":"../../../../../lib","sources":["internal/web/memidb/FDBDatabase.js"],"mappings":"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","ignoreList":[]}
