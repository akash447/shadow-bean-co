{"version":3,"names":["_FDBDatabase","_interopRequireDefault","require","_FDBOpenDBRequest","_FDBVersionChangeEvent","_cmp","_Database","_enforceRange","_errors","_FakeEvent","_scheduling","e","__esModule","default","waitForOthersClosedDelete","databases","name","openDatabases","cb","anyOpen","some","openDatabase2","_closed","_closePending","queueTask","delete","deleteDatabase","request","db","get","undefined","deletePending","connections","filter","connection","event","FDBVersionChangeEvent","newVersion","oldVersion","version","dispatchEvent","openDatabase3","err","runVersionchangeTransaction","_runningVersionchangeTransaction","_rawDatabase","otherDatabase","waitForOthersClosed","anyOpen2","transaction","objectStoreNames","result","readyState","_rollbackLog","push","addEventListener","AbortError","openDatabase","Database","set","VersionError","FDBDatabase","FDBFactory","cmp","_databases","Map","FDBOpenDBRequest","source","error","DOMException","message","FakeEvent","bubbles","cancelable","eventPath","event2","open","arguments","length","enforceRange","TypeError","Promise","resolve","database","toString","_default","exports"],"sourceRoot":"../../../../../lib","sources":["internal/web/memidb/FDBFactory.js"],"mappings":"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","ignoreList":[]}
